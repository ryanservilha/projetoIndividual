<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/questionario.css">
    <title>Questionário</title>
</head>

<body>
    <div class="container">
        <div class="logo">
            <a href="index.html">
                <h1>C<img src="./assets/imgs/logo.png">FFEEL</h1>
            </a>
        </div>

        <div class="tituloQuest">
            <h2>QUESTIONÁRIO</h2>
        </div>

        <div class="containerPerguntas">
            <div class="pergunta" id="idade">
                <div class="textoPergunta">
                    <h2>1 - Qual a sua idade?</h2>
                </div>

                <div class="inputs">
                    <input id="inpt_idadeUsuario">
                </div>
            </div>

            <div class="pergunta" id="cafeEssencial" style="display: none;">
                <div class="textoPergunta">
                    <h2>2 - O café é essencial na sua vida?</h2>
                </div>

                <form class="inputs" id="essencial">
                    <div class="ordemRadio">
                        <input type="radio" name="cafe" value="sim">
                        <p>Sim</p>
                    </div>
                    <div class="ordemRadio">
                        <input type="radio" name="cafe" value="não">
                        <p>Não</p>
                    </div>
                </form>
            </div>

            <div class="pergunta" id="ondeTomoCafe" style="display: none;">
                <div class="textoPergunta">
                    <h2>3 - Onde você costuma tomar o café?</h2>
                </div>

                <form class="inputs" id="lugarQueTomo">
                    <div class="ordemRadio">
                        <input type="radio" name="lugar" value="casa">
                        <p>Casa</p>
                    </div>
                    <div class="ordemRadio">
                        <input type="radio" name="lugar" value="trabalho">
                        <p>Trabalho</p>
                    </div>
                    <div class="ordemRadio">
                        <input type="radio" name="lugar" value="cafeterias">
                        <p>Cafeterias</p>
                    </div>
                    <div class="ordemRadio">
                        <input type="radio" name="lugar" value="outro">
                        <p>Outro</p>
                    </div>
                </form>
            </div>

            <div class="pergunta" id="qtdXicaras" style="display: none;">
                <div class="textoPergunta">
                    <h2>4 - Quantas xícaras de café você toma por dia?</h2>
                </div>

                <div class="inputs">
                    <input id="inpt_qtdCafesDia">
                </div>
            </div>

            <div class="pergunta" id="cafeMaisTomo" style="display: none;">
                <div class="textoPergunta">
                    <h2>5 - Que tipo de café você mais toma?</h2>
                </div>

                <form class="inputs" id="tipoDoCafe">
                    <div class="ordemRadio">
                        <input type="radio" name="tipo" value="coado">
                        <p>Coado</p>
                    </div>
                    <div class="ordemRadio">
                        <input type="radio" name="tipo" value="expresso">
                        <p>Expresso</p>
                    </div>
                    <div class="ordemRadio">
                        <input type="radio" name="tipo" value="solúvel">
                        <p>Solúvel</p>
                    </div>
                    <div class="ordemRadio">
                        <input type="radio" name="tipo" value="outro">
                        <p>Outro</p>
                    </div>
                </form>
            </div>

            <div class="pergunta" id="cafeGelado" style="display: none;">
                <div class="textoPergunta">
                    <h2>6 - Você gosta mais do café:</h2>
                </div>

                <form class="inputs" id="temperatura">
                    <div class="ordemRadio">
                        <input type="radio" name="gosto" value="gelado">
                        <p>Gelado</p>
                    </div>
                    <div class="ordemRadio">
                        <input type="radio" name="gosto" value="quente">
                        <p>Quente</p>
                    </div>
                </form>
            </div>

            <div class="pergunta" id="gastoCafe" style="display: none;">
                <div class="textoPergunta">
                    <h2>7 - Quanto você gasta com café por mês?</h2>
                </div>

                <div class="inputs">
                    <input id="inpt_valorCafeMes">
                </div>
            </div>

            <div class="pergunta" id="porqueTomo" style="display: none;">
                <div class="textoPergunta">
                    <h2>8 - Por que você consome café?</h2>
                </div>

                <form class="inputs" id="motivoQueTomo">
                    <div class="divisao">
                        <div class="ordemRadio">
                            <input type="radio" name="motivo" value="energia">
                            <p>Energia/Disposição</p>
                        </div>
                        <div class="ordemRadio">
                            <input type="radio" name="motivo" value="sabor">
                            <p>Sabor</p>
                        </div>
                    </div>
                    <div class="divisao">
                        <div class="ordemRadio">
                            <input type="radio" name="motivo" value="experiências sociais">
                            <p>Experiências Sociais</p>
                        </div>
                        <div class="ordemRadio">
                            <input type="radio" name="motivo" value="conforto emocional">
                            <p>Conforto Emocional</p>
                        </div>
                    </div>
                </form>
            </div>

            <button id="btnProximaPergunta" class="btnProxPergunta" onclick="proximaPergunta()">
                <p>Próxima Pergunta</p>
            </button>

            <button id="btnEnviarQuest" sty class="btnEnviar" onclick="enviar()">
                <p>ENVIAR</p>
            </button>
        </div>
    </div>
</body>

</html>
<script>
    var qtdClique = 0;
    var idadeUsuario = 0;
    var essencialCafe = "";
    var lugar = "";
    var quantXicaras = 0;
    var tipoDeCafe = ""
    var temperaturaCafe = "";
    var gastoMensal = 0;
    var motivoDeTomar = "";

    var lista = [];

    function proximaPergunta() {

        if (qtdClique == 0) {
            idadeUsuario = Number(inpt_idadeUsuario.value);

            if (idadeUsuario > 0 && idadeUsuario != '') {
                qtdClique++;

                idade.style.display = 'none';
                cafeEssencial.style.display = 'flex';
            }
            else {
                alert('Idade Inválida!')
            }
        }
        else if (qtdClique == 1) {
            essencialCafe = essencial.cafe.value;

            if (essencialCafe != '') {
                qtdClique++;

                cafeEssencial.style.display = 'none';
                ondeTomoCafe.style.display = 'flex';
            }
            else {
                alert('Selecione alguma resposta!')
            }
        }
        else if (qtdClique == 2) {
            lugar = lugarQueTomo.lugar.value;
            if (lugar != '') {
                qtdClique++;

                ondeTomoCafe.style.display = 'none';
                qtdXicaras.style.display = 'flex';
            }
            else {
                alert('Selecione alguma resposta!')
            }
        }
        else if (qtdClique == 3) {
            quantXicaras = Number(inpt_qtdCafesDia.value);
            if (quantXicaras != '') {
                qtdClique++;

                qtdXicaras.style.display = 'none';
                cafeMaisTomo.style.display = 'flex';
            }
            else {
                alert('Digite algum número')
            }
        }
        else if (qtdClique == 4) {
            tipoDeCafe = tipoDoCafe.tipo.value;
            if (tipoDeCafe != '') {
                qtdClique++;

                cafeMaisTomo.style.display = 'none';
                cafeGelado.style.display = 'flex';
            }
            else {
                alert('Selecione alguma resposta!')
            }
        }
        else if (qtdClique == 5) {
            temperaturaCafe = temperatura.gosto.value;
            if (temperaturaCafe != '') {
                qtdClique++;

                cafeGelado.style.display = 'none';
                gastoCafe.style.display = 'flex';
            }
            else {
                alert('Selecione alguma resposta!')
            }
        }
        else if (qtdClique == 6) {
            gastoMensal = Number(inpt_valorCafeMes.value);
            if (gastoMensal != '') {
                qtdClique++;

                gastoCafe.style.display = 'none';
                porqueTomo.style.display = 'flex';
            }
            else {
                alert('Digite algum valor!')
            }
        }
        else if (qtdClique == 7) {
            motivoDeTomar = motivoQueTomo.motivo.value;

            if (motivoDeTomar != '') {
                btnProximaPergunta.style.display = "none";
                btnEnviarQuest.style.display = "flex";
            }
            else[
                alert('Selecione alguma opção')
            ]
        }
    }

    function enviar() {
        var idUser = sessionStorage.ID_USUARIO;

        fetch("/usuarios/enviar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                // crie um atributo que recebe o valor recuperado aqui
                // Agora vá para o arquivo routes/usuario.js
                idadeServer: idadeUsuario,
                essencialServer: essencialCafe,
                lugarServer: lugar,
                quantXicarasServer: quantXicaras,
                tipoServer: tipoDeCafe,
                temperaturaServer: temperaturaCafe,
                gastoServer: gastoMensal,
                motivoServer: motivoDeTomar,
                idUserServer: idUser
            }),
        })
            .then(function (resposta) {
                console.log("resposta: ", resposta);
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });


        alert('Questionário enviado!')

        return false;
    }
</script>